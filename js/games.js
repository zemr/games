function generateCover(t){root.innerHTML=coverScheme,fillCover(t.messageContent,t.buttonContent)}function fillCover(t,e){var n=document.getElementsByClassName("message"),a=document.getElementsByClassName("button");n[0].textContent=t,a[0].textContent=e}function game1(){function t(t){generateCover(t),e()}function e(){document.getElementById("start").onclick=function(){root.innerHTML=n(),setTimeout(function(){root.onclick=i,c(),l=setTimeout(d,1e5)},0)}}function n(){for(var t='<div class="plants">',e=1;e<g;e++)t+='<span id="'+e+'" class="stage_3"></span>';return t+="</div>"}function a(){var t=document.querySelectorAll(".stage_3, .stage_2, .stage_1");return t.length<1&&d(),t[Math.floor(Math.random()*t.length)]}function o(t){return t.classList.item(0).split("_")[1]}function r(t,e,n){return 3===n?n:(t.classList="",t.classList.add("stage_"+(e-1)),u=setTimeout(function(){r(t,e-1,n+1)},800))}function s(){clearTimeout(u)}function i(t){var e=t.target;if(e.id){var n=e.classList.item(0);"stage_4"!==n&&"stage_0"!==n&&(e.classList="",e.classList.add("stage_"+(+n.split("_")[1]+1)))}}function c(){m=setInterval(function(){var t=a();if(t){var e=o(t);t.onclick=s,r(t,e,3-e)}},1200)}function d(){clearInterval(m),clearInterval(l),t(f.back)}var l,u,m,g,v=document.getElementById("close"),f={front:{messageContent:"Masz pod swoją opieką sadzonki. Twoim zadaniem jest dopilnować, żeby żadna z nich nie uschła. Podlewaj je kliknięciami, gdy zaczną więdnąć, ale uważaj, żeby ich nie przelać, bo zgniją.",buttonContent:"Rozpocznij grę"},back:{messageContent:"Koniec gry",buttonContent:"Ponów"}};window.innerWidth<760?function(t,e){var n=(t*e-t*e*.35)/2e4;g=Math.floor(n)}(innerWidth,innerHeight):g=16,t(f.front),v.addEventListener("click",d)}function game2(){function t(){root.innerHTML=o(),r()}function e(t){for(var e=3;e>0;){var n=Math.floor(Math.random()*(e+1)),a=t[e];t[e]=t[n],t[n]=a,e--}}function n(){e(N);for(var t='<div class="top">',n=0;n<4;)t+='<div class="'+N[n]+'-top source" draggable="true"></div>',n++;return t+="</div>"}function a(){e(N);for(var t='<div class="bottom">',n=0;n<4;)t+='<div class="'+N[n]+'-bottom target"></div>',n++;return t+="</div>"}function o(){return n().concat(a())}function r(){for(var t=document.getElementsByClassName("source"),e=0;e<t.length;e++)t[e].addEventListener("dragstart",i,!1),t[e].addEventListener("dragend",g,!1),t[e].addEventListener("touchstart",c,!1),t[e].addEventListener("touchmove",v,!1);var n=document.getElementsByClassName("target");for(e=0;e<n.length;e++)n[e].addEventListener("dragover",d,!1),n[e].addEventListener("dragenter",l,!1),n[e].addEventListener("dragleave",u,!1),n[e].addEventListener("drop",p,!1),n[e].addEventListener("dragend",m,!1)}function s(){L.removeEventListener("dragstart",i,!1),L.parentNode.removeEventListener("dragenter",l,!1),L.parentNode.removeEventListener("dragleave",u,!1),L.parentNode.removeEventListener("drop",p,!1)}function i(t){t.target.style.opacity=.6,L=t.target,C=t.target.className[0],t.dataTransfer.setData("text/html",t.target.className)}function c(t){L=t.targetTouches[0].target,C=t.targetTouches[0].target.className[0]}function d(t){t.preventDefault()}function l(t){t.target.className[0]===C&&(t.target.style.transform="scale(.8)")}function u(){this.style.transform=""}function m(){this.style.transform=""}function g(){this.style.opacity=""}function v(t){var e=t.targetTouches[0].clientX,n=t.targetTouches[0].clientY,a=(b=document.elementFromPoint(e,n)).getBoundingClientRect();f(a.left,a.top)}function f(t,e){b.className[0]===C&&(L.classList.add("moved"),L.style.left=t+"px",L.style.top=e+"px",b.style.border="none",y(),h())}function p(t){t.preventDefault(),t.target.className[0]===C&&(t.target.appendChild(L),L.removeAttribute("draggable"),L.parentNode.style.border="none",s(),y(),h())}function y(){var t=document.getElementsByClassName("top"),e=document.createElement("div");e.classList.add("empty"),t[0].appendChild(e)}function h(){var t=document.getElementsByClassName("empty");4===t.length&&setTimeout(function(){document.getElementsByClassName("bottom")[0].style.transform="scale(0.7) rotate(45deg)",E(t[1])},400)}function E(e){e.classList.add("replay"),e.onclick=t}var L,C,b,N=["a","b","c","d"];generateCover({messageContent:"Przeciągnij kolorowe bloki na odpowiednie miejsca na środku ekranu.",buttonContent:"Rozpocznij grę"}),document.getElementById("start").onclick=t}var root=document.getElementById("game"),coverScheme='<div class="cover"><div class="message"></div><button class="button" id="start"></button></div>';
function generateCover(e){root.innerHTML=coverScheme,fillCover(e.messageContent,e.buttonContent)}function fillCover(e,t){var n=document.getElementsByClassName("message"),a=document.getElementsByClassName("button");n[0].textContent=e,a[0].textContent=t}function game1(){function e(e){generateCover(e),t()}function t(){document.getElementById("start").onclick=function(){root.innerHTML=n(),setTimeout(function(){root.onclick=i,c(),l=setTimeout(d,1e5)},0)}}function n(){for(var e='<div class="plants">',t=1;t<v;t++)e+='<span id="'+t+'" class="stage_3"></span>';return e+="</div>"}function a(){var e=document.querySelectorAll(".stage_3, .stage_2, .stage_1");return e.length<1&&d(),e[Math.floor(Math.random()*e.length)]}function o(e){return e.classList.item(0).split("_")[1]}function r(e,t,n){return 3===n?n:(e.classList="",e.classList.add("stage_"+(t-1)),u=setTimeout(function(){r(e,t-1,n+1)},800))}function s(){clearTimeout(u)}function i(e){var t=e.target;if(t.id){var n=t.classList.item(0);"stage_4"!==n&&"stage_0"!==n&&(t.classList="",t.classList.add("stage_"+(+n.split("_")[1]+1)))}}function c(){m=setInterval(function(){var e=a();if(e){var t=o(e);e.onclick=s,r(e,t,3-t)}},1200)}function d(){clearInterval(m),clearInterval(l),e(f.back)}var l,u,m,v,g=document.getElementById("close"),f={front:{messageContent:"Masz pod swoją opieką sadzonki. Twoim zadaniem jest dopilnować, żeby żadna z nich nie uschła. Podlewaj je kliknięciami, gdy zaczną więdnąć, ale uważaj, żeby ich nie przelać, bo zgniją.",buttonContent:"Rozpocznij grę"},back:{messageContent:"Koniec gry",buttonContent:"Ponów"}};window.innerWidth<760?function(e,t){var n=(e*t-e*t*.35)/2e4;v=Math.floor(n)}(innerWidth,innerHeight):v=16,e(f.front),g.addEventListener("click",d)}function game2(){function e(){root.innerHTML=o(),r()}function t(e){for(var t=3;t>0;){var n=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[n],e[n]=a,t--}}function n(){t(N);for(var e='<div class="top">',n=0;n<4;)e+='<div class="'+N[n]+'-top source" draggable="true"></div>',n++;return e+="</div>"}function a(){t(N);for(var e='<div class="bottom">',n=0;n<4;)e+='<div class="'+N[n]+'-bottom target"></div>',n++;return e+="</div>"}function o(){return n().concat(a())}function r(){for(var e=document.getElementsByClassName("source"),t=0;t<e.length;t++)e[t].addEventListener("dragstart",i,!1),e[t].addEventListener("dragend",v,!1),e[t].addEventListener("touchstart",c,{passive:!1}),e[t].addEventListener("touchmove",g,{passive:!1});var n=document.getElementsByClassName("target");for(t=0;t<n.length;t++)n[t].addEventListener("dragover",d,!1),n[t].addEventListener("dragenter",l,!1),n[t].addEventListener("dragleave",u,!1),n[t].addEventListener("drop",p,!1),n[t].addEventListener("dragend",m,!1)}function s(){L.removeEventListener("dragstart",i,!1),L.parentNode.removeEventListener("dragenter",l,!1),L.parentNode.removeEventListener("dragleave",u,!1),L.parentNode.removeEventListener("drop",p,!1)}function i(e){e.target.style.opacity=.6,L=e.target,C=e.target.className[0],e.dataTransfer.setData("text/html",e.target.className)}function c(e){L=e.targetTouches[0].target,C=e.targetTouches[0].target.className[0]}function d(e){e.preventDefault()}function l(e){e.target.className[0]===C&&(e.target.style.transform="scale(.8)")}function u(){this.style.transform=""}function m(){this.style.transform=""}function v(){this.style.opacity=""}function g(e){e.preventDefault();var t=e.targetTouches[0].clientX,n=e.targetTouches[0].clientY;b=document.elementFromPoint(t,n),f()}function f(){"target"===b.classList[1]&&b.className[0]===C&&(b.appendChild(L),b.style.border="none",L.removeEventListener("touchmove",g,{passive:!1}),h(),y())}function p(e){e.preventDefault(),e.target.className[0]===C&&(e.target.appendChild(L),L.removeAttribute("draggable"),L.parentNode.style.border="none",s(),h(),y())}function h(){var e=document.getElementsByClassName("top"),t=document.createElement("div");t.classList.add("empty"),t.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1}),e[0].appendChild(t)}function y(){var e=document.getElementsByClassName("empty");4===e.length&&setTimeout(function(){document.getElementsByClassName("bottom")[0].style.transform="scale(0.7) rotate(45deg)",E(e[1])},400)}function E(t){t.classList.add("replay"),t.onclick=e}var L,C,b,N=["a","b","c","d"];generateCover({messageContent:"Przeciągnij kolorowe bloki na odpowiednie miejsca na środku ekranu.",buttonContent:"Rozpocznij grę"}),document.getElementById("start").onclick=e}var root=document.getElementById("game"),coverScheme='<div class="cover"><div class="message"></div><button class="button" id="start"></button></div>';
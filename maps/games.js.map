{"version":3,"sources":["game-0.js","game-1.js","game-2.js"],"names":["generateCover","content","root","innerHTML","coverScheme","fillCover","messageContent","buttonContent","message","document","getElementsByClassName","button","textContent","game1","generateActiveCover","prepareStartingGameButton","getElementById","onclick","putPlants","setTimeout","waterPlant","startWatering","countdown","stopGame","plants","i","count","choosePlant","querySelectorAll","length","Math","floor","random","checkSoil","plant","classList","item","split","dryingOut","stage","counter","add","dry","stopDryingOut","clearTimeout","e","target","id","keepingWatered","setInterval","soilStage","clearInterval","coverContent","back","close","front","window","innerWidth","width","height","places","innerHeight","addEventListener","game2","prepareGame","generateView","addEvents","shuffle","classes","j","temp","generateTop","str","generateBottom","concat","blocks","handleDragStart","handleBlockDragEnd","handleTouchStart","passive","handleTouchMove","targets","handleDragOver","handleDragEnter","handleDragLeave","handleDrop","handleDragEnd","removeEvents","block","removeEventListener","parentNode","style","opacity","blockType","className","dataTransfer","setData","targetTouches","preventDefault","transform","this","x","clientX","y","clientY","blockTarget","elementFromPoint","moveBlock","appendChild","border","makeEmpty","checkEmpties","removeAttribute","top","div","createElement","empties","generateReplayButton"],"mappings":"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","file":"../js/games.js","sourcesContent":["var root = document.getElementById('game');\nvar coverScheme = '<div class=\"cover\">' +\n  '<div class=\"message\"></div>' +\n  '<button class=\"button\" id=\"start\"></button>' +\n  '</div>';\n\nfunction generateCover(content) {\n  root.innerHTML = coverScheme;\n  fillCover(content.messageContent, content.buttonContent);\n}\n\nfunction fillCover(messageContent, buttonContent) {\n  var message = document.getElementsByClassName('message');\n  var button = document.getElementsByClassName('button');\n  message[0].textContent = messageContent;\n  button[0].textContent = buttonContent;\n}\n","function game1() {\n  var close = document.getElementById('close');\n  var coverContent = {\n    front: {\n      messageContent: 'Masz pod swoją opieką sadzonki. ' +\n      'Twoim zadaniem jest dopilnować, żeby żadna z nich nie uschła. ' +\n      'Podlewaj je kliknięciami, gdy zaczną więdnąć, ale uważaj, żeby ich nie przelać, bo zgniją.',\n      buttonContent: 'Rozpocznij grę'\n    },\n    back: {\n      messageContent: 'Koniec gry',\n      buttonContent: 'Ponów'\n    }\n  };\n  var countdown, dry, keepingWatered;\n  var count;\n\n  function generateActiveCover(content) {\n    generateCover(content);\n    prepareStartingGameButton();\n  }\n\n  function prepareStartingGameButton() {\n    var start = document.getElementById('start');\n    start.onclick = function() {\n      root.innerHTML = putPlants();\n      setTimeout(function() {\n        root.onclick = waterPlant;\n        startWatering();\n        countdown = setTimeout(stopGame, 100000);\n      }, 0);\n    };\n  }\n\n  function setCount(width, height) {\n    var places = (width * height - (width * height * 0.35)) / 20000;\n    return count = Math.floor(places);\n  }\n\n  if (window.innerWidth < 760) {\n    setCount(innerWidth, innerHeight);\n  } else {\n    count = 16;\n  }\n\n  function putPlants() {\n    var plants = '<div class=\"plants\">';\n    for (var i = 1; i < count; i++) {\n      plants += '<span id=\"' + i + '\" class=\"stage_3\"></span>';\n    }\n    plants += '</div>';\n    return plants;\n  }\n\n  function choosePlant() {\n    var plants = document.querySelectorAll('.stage_3, .stage_2, .stage_1');\n    if (plants.length < 1) stopGame();\n    var randomPlant = Math.floor(Math.random() * (plants.length));\n    return plants[randomPlant];\n  }\n\n  function checkSoil(plant) {\n    return plant.classList.item(0).split('_')[1];\n  }\n\n  function dryingOut(plant, stage, counter) {\n    if (counter === 3) {\n      return counter;\n    }\n    plant.classList = '';\n    plant.classList.add('stage_' + (stage - 1));\n    dry = setTimeout(function () {\n      dryingOut(plant, stage - 1, counter + 1);\n    }, 800);\n    return dry;\n  }\n\n  function stopDryingOut() {\n    clearTimeout(dry);\n  }\n\n  function waterPlant(e) {\n    var target = e.target;\n    if (target.id) {\n      var stage = target.classList.item(0);\n      if (stage !== 'stage_4' && stage !== 'stage_0') {\n        target.classList = '';\n        target.classList.add('stage_' + (+stage.split('_')[1] + 1));\n      }\n    }\n  }\n\n  function startWatering() {\n    keepingWatered = setInterval(function () {\n      var plant = choosePlant();\n      if (plant) {\n        var soilStage = checkSoil(plant);\n        plant.onclick = stopDryingOut;\n        dryingOut(plant, soilStage, 3 - soilStage);\n      }\n    }, 1200);\n  }\n\n  function stopGame() {\n    clearInterval(keepingWatered);\n    clearInterval(countdown);\n    root.onclick = null;\n    generateActiveCover(coverContent.back);\n  }\n\n  generateActiveCover(coverContent.front);\n  close.addEventListener('click', stopGame);\n}\n","function game2() {\n  var coverContent = {\n    messageContent: 'Przeciągnij kolorowe bloki na odpowiednie miejsca na środku ekranu.',\n    buttonContent: 'Rozpocznij grę'\n  };\n  var classes = ['a', 'b', 'c', 'd'];\n  var block, blockType, blockTarget;\n\n  function prepareGame() {\n    root.innerHTML = generateView();\n    addEvents();\n  }\n\n  function prepareStartingGameButton() {\n    var start = document.getElementById('start');\n    start.onclick = prepareGame;\n  }\n\n  function shuffle(classes) {\n    var i = 3;\n    while (i > 0) {\n      var j = Math.floor(Math.random() * (i + 1));\n      var temp = classes[i];\n      classes[i] = classes[j];\n      classes[j] = temp;\n      i--;\n    }\n  }\n\n  function generateTop() {\n    shuffle(classes);\n    var str = '<div class=\"top\">';\n    var i = 0;\n    while (i < 4) {\n      str += '<div class=\"' + classes[i] + '-top source\" draggable=\"true\"></div>';\n      i++;\n    }\n    str += '</div>';\n    return str;\n  }\n\n  function generateBottom() {\n    shuffle(classes);\n    var str = '<div class=\"bottom\">';\n    var i = 0;\n    while (i < 4) {\n      str += '<div class=\"' + classes[i] + '-bottom target\"></div>';\n      i++;\n    }\n    str += '</div>';\n    return str;\n  }\n\n  function generateView() {\n    return generateTop().concat(generateBottom());\n  }\n\n  function addEvents() {\n    var blocks = document.getElementsByClassName('source');\n    for (var i = 0; i < blocks.length; i++) {\n      blocks[i].addEventListener('dragstart', handleDragStart, false);\n      blocks[i].addEventListener('dragend', handleBlockDragEnd, false);\n      blocks[i].addEventListener('touchstart', handleTouchStart, {passive: false});\n      blocks[i].addEventListener('touchmove', handleTouchMove, {passive: false});\n    }\n\n    var targets = document.getElementsByClassName('target');\n    for (i = 0; i < targets.length; i++) {\n      targets[i].addEventListener('dragover', handleDragOver, false);\n      targets[i].addEventListener('dragenter', handleDragEnter, false);\n      targets[i].addEventListener('dragleave', handleDragLeave, false);\n      targets[i].addEventListener('drop', handleDrop, false);\n      targets[i].addEventListener('dragend', handleDragEnd, false);\n    }\n  }\n\n  function removeEvents() {\n    block.removeEventListener('dragstart', handleDragStart, false);\n    block.parentNode.removeEventListener('dragenter', handleDragEnter, false);\n    block.parentNode.removeEventListener('dragleave', handleDragLeave, false);\n    block.parentNode.removeEventListener('drop', handleDrop, false);\n  }\n\n  function handleDragStart(e) {\n    e.target.style.opacity = 0.6;\n    block = e.target;\n    blockType = e.target.className[0];\n    e.dataTransfer.setData(\"text/html\", e.target.className);\n  }\n\n  function handleTouchStart(e) {\n    block = e.targetTouches[0].target;\n    blockType = e.targetTouches[0].target.className[0];\n  }\n\n  function handleDragOver(e) {\n    e.preventDefault();\n  }\n\n  function handleDragEnter(e) {\n    if (e.target.className[0] === blockType) {\n      e.target.style.transform = 'scale(.8)';\n    }\n  }\n\n  function handleDragLeave() {\n    this.style.transform = '';\n  }\n\n  function handleDragEnd() {\n    this.style.transform = '';\n  }\n\n  function handleBlockDragEnd() {\n    this.style.opacity = '';\n  }\n\n  function handleTouchMove(e) {\n    e.preventDefault();\n    var x = e.targetTouches[0].clientX;\n    var y = e.targetTouches[0].clientY;\n    blockTarget = document.elementFromPoint(x, y);\n    moveBlock();\n  }\n\n  function moveBlock() {\n    if (blockTarget.classList[1] === 'target' && blockTarget.className[0] === blockType) {\n      blockTarget.appendChild(block);\n      blockTarget.style.border = 'none';\n      block.removeEventListener('touchmove', handleTouchMove, {passive: false});\n      makeEmpty();\n      checkEmpties();\n    }\n  }\n\n  function handleDrop(e) {\n    e.preventDefault();\n    if (e.target.className[0] === blockType) {\n      e.target.appendChild(block);\n      block.removeAttribute('draggable');\n      block.parentNode.style.border = 'none';\n      removeEvents();\n      makeEmpty();\n      checkEmpties();\n    }\n  }\n\n  function makeEmpty() {\n    var top = document.getElementsByClassName('top');\n    var div = document.createElement('div');\n    div.classList.add('empty');\n    div.addEventListener('touchmove', function(e) { e.preventDefault(); }, {passive: false});\n    top[0].appendChild(div);\n  }\n\n  function checkEmpties() {\n    var empties = document.getElementsByClassName('empty');\n    if (empties.length === 4) {\n      setTimeout(function() {\n        var set = document.getElementsByClassName('bottom');\n        set[0].style.transform = 'scale(0.7) rotate(45deg)';\n        generateReplayButton(empties[1]);\n      }, 400);\n    }\n  }\n\n  function generateReplayButton(target) {\n    target.classList.add('replay');\n    target.onclick = prepareGame;\n  }\n\n  generateCover(coverContent);\n  prepareStartingGameButton();\n}\n"]}